<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.18"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>HElib: src/tableLookup.cpp File Reference</title>
        <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
		<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;1,700&family=Merriweather&family=Merriweather+Sans&family=Open+Sans&family=Poppins:ital@1&family=Roboto:ital,wght@0,400;1,300;1,900&display=swap" rel="stylesheet"> 
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <link href="jquery.smartmenus.bootstrap.css" rel="stylesheet">
        <script type="text/javascript" src="jquery.smartmenus.js"></script>
        <!-- SmartMenus jQuery Bootstrap Addon -->
        <script type="text/javascript" src="jquery.smartmenus.bootstrap.js"></script>
        <!-- SmartMenus jQuery plugin -->
    </head>
    <body style="font-family: 'Merriweather', serif;">
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">HElib </a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tableLookup.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Code for homomorphic table lookup and fixed-point functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;limits&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;cstdlib&gt;</code><br />
<code>#include &lt;stdexcept&gt;</code><br />
<code>#include &lt;NTL/BasicThreadPool.h&gt;</code><br />
<code>#include &lt;<a class="el" href="intra_slot_8h_source.html">helib/intraSlot.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="table_lookup_8h_source.html">helib/tableLookup.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa13b0418c17fe6b26a2006507d2b57ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="table_lookup_8h.html#aa13b0418c17fe6b26a2006507d2b57ac">helib::computeAllProducts</a> (CtPtrs &amp;products, const CtPtrs &amp;array, std::vector&lt; zzX &gt; *unpackSlotEncoding=nullptr)</td></tr>
<tr class="separator:aa13b0418c17fe6b26a2006507d2b57ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57a5ec00207d3ca4206aaa810e04dc5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="table_lookup_8h.html#a57a5ec00207d3ca4206aaa810e04dc5f">helib::tableLookup</a> (Ctxt &amp;out, const std::vector&lt; zzX &gt; &amp;table, const CtPtrs &amp;idx, std::vector&lt; zzX &gt; *unpackSlotEncoding=nullptr)</td></tr>
<tr class="separator:a57a5ec00207d3ca4206aaa810e04dc5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c931bc04df2c12ffb4e48ae6eb7b404"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="table_lookup_8h.html#a5c931bc04df2c12ffb4e48ae6eb7b404">helib::tableWriteIn</a> (const CtPtrs &amp;table, const CtPtrs &amp;idx, std::vector&lt; zzX &gt; *unpackSlotEncoding=nullptr)</td></tr>
<tr class="separator:a5c931bc04df2c12ffb4e48ae6eb7b404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add048fff3de003ad2b670a9ae3ed6f2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="table_lookup_8h.html#add048fff3de003ad2b670a9ae3ed6f2b">helib::buildLookupTable</a> (std::vector&lt; zzX &gt; &amp;T, std::function&lt; double(double)&gt; f, long nbits_in, long scale_in, long sign_in, long nbits_out, long scale_out, long sign_out, const EncryptedArray &amp;ea)</td></tr>
<tr class="memdesc:add048fff3de003ad2b670a9ae3ed6f2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Built a table-lookup for a function in fixed-point representation.  <a href="table_lookup_8h.html#add048fff3de003ad2b670a9ae3ed6f2b">More...</a><br /></td></tr>
<tr class="separator:add048fff3de003ad2b670a9ae3ed6f2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Code for homomorphic table lookup and fixed-point functions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="add048fff3de003ad2b670a9ae3ed6f2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add048fff3de003ad2b670a9ae3ed6f2b">&#9670;&nbsp;</a></span>buildLookupTable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void helib::buildLookupTable </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; zzX &gt; &amp;&#160;</td>
          <td class="paramname"><em>T</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; double(double)&gt;&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nbits_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>scale_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>sign_in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nbits_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>scale_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>sign_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classhelib_1_1_encrypted_array.html">EncryptedArray</a> &amp;&#160;</td>
          <td class="paramname"><em>ea</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Built a table-lookup for a function in fixed-point representation. </p>
<p>@function buildLookupTable FIXED-POINT CONVENTIONS: Fixed-point numbers are specified by a triple (nbits,scale,signed). Such a number is represented as an integer x with nbits bits. If signed == 1, then x is treated as a signed integer in 2's compliment; otherwise it is as an unsigned integer. The value represented by x is x*2^{scale}.</p>
<p>The buildLookupTable function builds a lookup table T, which can be used in conjunction with the tableLookup function above. The size of T will be 2^{nbits_in}. For every signed integer x with bit-size 'nbits_in', we will have T[x] = f(x * 2^{scale_in}) * 2^{-scale_out}), rounded to the nearest integer and truncated to 'nbits_out' bits. The bits are packed inside the slots, so it is assumed that each slot has enough room to fit these many bits. (Otherwise we only keep as many low-order bits as fit in a slot.)</p>
<p>SATURATED ARITHMETIC: Applications of f that return a result that is too large to represent in the output format will be converted to the maximum representable value. Similarly, Applications of f that return a result that is too small will be converted to the minimal representable value. (This applies also to applications of f that return infinites, NaNs will just be mapped to zero.) For this to work correctly, you should be working with standard IEEE arithmetic...which will be the case on almost all platforms.</p>
<p>EXAMPLE:</p>
<p>buildLookupTable(T, [](double x){ return 1/x;}, nbits_in, scale_in, nbits_out, scale_out, sign_out, ea)</p>
<p>will build a lookup table for inversion. </p>

</div>
</div>
<a id="aa13b0418c17fe6b26a2006507d2b57ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa13b0418c17fe6b26a2006507d2b57ac">&#9670;&nbsp;</a></span>computeAllProducts()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void helib::computeAllProducts </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhelib_1_1_ptr_vector.html">CtPtrs</a> &amp;&#160;</td>
          <td class="paramname"><em>products</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structhelib_1_1_ptr_vector.html">CtPtrs</a> &amp;&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; zzX &gt; *&#160;</td>
          <td class="paramname"><em>unpackSlotEncoding</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For an n-size array, compute the 2^n products products[j] = \prod_{i s.t. j_i=1} array[i] \times \prod_{i s.t. j_i=0}(a-array[i]) </p>

</div>
</div>
<a id="a57a5ec00207d3ca4206aaa810e04dc5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57a5ec00207d3ca4206aaa810e04dc5f">&#9670;&nbsp;</a></span>tableLookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void helib::tableLookup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classhelib_1_1_ctxt.html">Ctxt</a> &amp;&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; zzX &gt; &amp;&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structhelib_1_1_ptr_vector.html">CtPtrs</a> &amp;&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; zzX &gt; *&#160;</td>
          <td class="paramname"><em>unpackSlotEncoding</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The input is a plaintext table T[] and an array of encrypted bits I[], holding the binary representation of an index i into T. The output is the encrypted value T[i]. </p>

</div>
</div>
<a id="a5c931bc04df2c12ffb4e48ae6eb7b404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c931bc04df2c12ffb4e48ae6eb7b404">&#9670;&nbsp;</a></span>tableWriteIn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void helib::tableWriteIn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structhelib_1_1_ptr_vector.html">CtPtrs</a> &amp;&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structhelib_1_1_ptr_vector.html">CtPtrs</a> &amp;&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; zzX &gt; *&#160;</td>
          <td class="paramname"><em>unpackSlotEncoding</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The input is an encrypted table T[] and an array of encrypted bits I[], holding the binary representation of an index i into T. This function increments by one the entry T[i]. </p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
        <script type="text/javascript" src="doxy-boot.js"></script>
</html>
